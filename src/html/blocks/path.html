<section class="path-wrap">
	<div class="container">
		<div class="title">
			<div class="title__head">
				<span>Наш шлях</span>
				<h2>Історія нашого розвитку</h2>
			</div>
			<p class="title__description">
				Наша організація була заснована у 2018 році на прифронтовій Луганщині
				жінками та дівчатами, які пережили перше вимушене переміщення з
				окупованого Луганська.
			</p>
		</div>
		<div class="path">
			<img class="path__bg" src="./img/map.svg" alt="" />
			<div class="path__left">
				<img class="large" src="./img/path.jpg" alt="" />
				<div class="path__left-wrap-img">
					<img class="small" src="./img/path-small.jpg" alt="" />
				</div>
			</div>
			<div class="path__right">
				<p class="path__right-text">
					Без ресурсів, але з великою рішучістю, ми реалізували десятки
					ініціатив: відкрили молодіжний простір, проводили інтеграційні та
					екологічні заходи, створювали безпечні простори для людей поважного
					віку. Після повномасштабного вторгнення 2022 року ми вдруге втратили
					дім і переїхали до Дніпра. Почавши з нуля, ми не здались і сьогодні
					працюємо по всій Україні. Ми самі є частиною нашої цільової аудиторії,
					тому глибоко розуміємо потреби ВПО, жінок, людей з інвалідністю,
					ЛГБТК+ спільноти та постраждалих від насильства.
				</p>
				<ul class="path__right-list">
					<li class="path__right-item">
						<span class="counter" data-target="53" data-suffix="+">0</span>
						Волонтерів та активістів долучилися до наших ініціатив у різних
						країнах світу.
					</li>
					<li class="path__right-item">
						<span class="counter" data-target="15" data-suffix=" тис.">0</span>
						Бенефіціарів охоплено нашими програмами по всій Україні.
					</li>
					<li class="path__right-item">
						<span class="counter" data-target="28" data-suffix=" т.">0</span>
						Гуманітарних вантажів розповсюджено серед бенефіціарів у межах
						гуманітарної відповіді.
					</li>
				</ul>
			</div>
		</div>
		<ul class="path__bottom-list">
			<li class="path__right-item">
				<span class="counter" data-target="53" data-suffix="+">0</span>
				Волонтерів та активістів долучилися до наших ініціатив у різних країнах
				світу.
			</li>
			<li class="path__right-item">
				<span class="counter" data-target="15" data-suffix=" тис.">0</span>
				Бенефіціарів охоплено нашими програмами по всій Україні.
			</li>
			<li class="path__right-item">
				<span class="counter" data-target="28" data-suffix=" т.">0</span>
				Гуманітарних вантажів розповсюджено серед бенефіціарів у межах
				гуманітарної відповіді.
			</li>
		</ul>
	</div>
</section>
<script>
	function animateCounter(el, target, suffix = '', duration = 1500) {
		const startTime = performance.now()

		function update(currentTime) {
			const elapsed = currentTime - startTime
			const progress = Math.min(elapsed / duration, 1)
			const value = Math.floor(progress * target)

			el.textContent = value.toLocaleString('uk-UA') + suffix

			if (progress < 1) {
				requestAnimationFrame(update)
			} else {
				el.textContent = target.toLocaleString('uk-UA') + suffix
			}
		}

		requestAnimationFrame(update)
	}

	document.addEventListener('DOMContentLoaded', () => {
		const counters = document.querySelectorAll('.counter')
		const options = {
			threshold: 0.5,
		}

		const observer = new IntersectionObserver((entries, obs) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					const el = entry.target
					const target = parseInt(el.dataset.target, 10)
					const suffix = el.dataset.suffix || ''

					animateCounter(el, target, suffix)
					obs.unobserve(el)
				}
			})
		}, options)

		counters.forEach(counter => observer.observe(counter))
	})
</script>
